<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>âœ¨í–‰ìš´ ì¿ í‚¤ â€” ì˜¤ëŠ˜ì˜ í•œ ì¤„</title>
  <meta name="description" content="ê¹”ë¡±í•˜ê³  ì‹¬í”Œí•œ í–‰ìš´ ì¿ í‚¤ ì›¹ â€” ë²„íŠ¼ ëˆ„ë¥´ë©´ ì¿ í‚¤ ê¹¨ì§€ê³  ë©”ì‹œì§€ ë“±ì¥!" />
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#FFDEE9; --bg2:#B5FFFC; --accent:#FF7BAC; --glass: rgba(255,255,255,0.65);
      --card-shadow: 0 10px 30px rgba(20,20,40,0.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Nanum Gothic', 'Space Grotesk', system-ui, -apple-system, "Segoe UI", Roboto;
      background: radial-gradient(1200px 600px at 10% 20%, rgba(255,255,255,0.15), transparent), linear-gradient(120deg,var(--bg1),var(--bg2));
      display:flex; align-items:center; justify-content:center; padding:32px;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    .wrap{width:min(940px,96%); display:grid; grid-template-columns:1fr 360px; gap:28px; align-items:center}
    @media (max-width:900px){.wrap{grid-template-columns:1fr;}}

    /* Left big card */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.55));
      border-radius:24px; padding:36px; box-shadow:var(--card-shadow); backdrop-filter: blur(8px);
      position:relative; overflow:visible;
    }

    .title{display:flex; align-items:center; gap:14px}
    .logo{width:68px; height:68px; border-radius:14px; background:linear-gradient(135deg,#fff2, #fff6); display:flex; align-items:center; justify-content:center; font-weight:800; font-size:22px; color:var(--accent); box-shadow:0 6px 18px rgba(0,0,0,0.08);}
    h1{margin:0; font-size:20px}
    p.lead{margin:12px 0 24px; color:#333a; font-size:14px}

    .stage{display:flex; gap:28px; align-items:center}

    /* Cookie area */
    .cookie-wrap{width:320px; height:320px; display:flex; align-items:center; justify-content:center; position:relative}
    .cookie{width:220px; height:220px; border-radius:50%; background:linear-gradient(160deg,#E0A16C,#C57B44); box-shadow: 0 18px 40px rgba(0,0,0,0.18); display:flex; align-items:center; justify-content:center; cursor:pointer; transform-origin:center; transition:transform .25s ease}
    .cookie.shake{animation:shake .8s}
    @keyframes shake{0%{transform:rotate(0)}20%{transform:rotate(-12deg)}40%{transform:rotate(10deg)}60%{transform:rotate(-8deg)}80%{transform:rotate(6deg)}100%{transform:rotate(0)}}

    .crack{position:absolute; width:220px; height:220px; pointer-events:none; filter:drop-shadow(0 6px 12px rgba(0,0,0,0.1));}
    .broken{display:none}
    .note{
      position:absolute; bottom:18px; width:78%; left:50%; transform:translateX(-50%) translateY(20px); background:linear-gradient(180deg,#fff,#fff9); padding:14px 18px; border-radius:12px; box-shadow:0 8px 26px rgba(30,30,70,0.12); text-align:center; opacity:0; transform-origin:center; transition:all .45s cubic-bezier(.2,.9,.25,1);
      font-weight:700; color:#222; font-size:16px; line-height:1.2;
    }
    .note.show{opacity:1; transform:translateX(-50%) translateY(0) scale(1)}

    .controls{display:flex; gap:12px; margin-top:18px}
    .btn{padding:12px 16px; border-radius:12px; border:0; cursor:pointer; font-weight:700; letter-spacing:0.2px; box-shadow:0 6px 18px rgba(0,0,0,0.08)}
    .btn-primary{background:linear-gradient(90deg,var(--accent),#FFB199); color:white}
    .btn-ghost{background:transparent; border:1px solid rgba(0,0,0,0.06)}

    /* Right panel */
    .side{display:flex; flex-direction:column; gap:18px}
    .history{background:var(--glass); padding:14px; border-radius:12px; min-height:120px}
    .history h3{margin:0 0 8px 0; font-size:13px}
    .hist-list{display:flex; flex-direction:column; gap:8px; max-height:220px; overflow:auto}
    .hist-item{font-size:13px; padding:8px 10px; border-radius:8px; background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4)); box-shadow:inset 0 -1px 0 rgba(255,255,255,0.3)}

    .hint{font-size:12px; color:#222a}

    /* confetti canvas */
    canvas.confetti{position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none}

    footer{margin-top:14px; font-size:12px; color:#222a}

    /* small flourish */
    .sparkle{position:absolute; width:10px; height:10px; border-radius:50%; background:radial-gradient(circle at 35% 30%, #fff, rgba(255,255,255,0.5)); box-shadow:0 6px 20px rgba(255,120,180,0.2); opacity:0.9}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="title">
        <div class="logo">ğŸª</div>
        <div>
          <h1>ì˜¤ëŠ˜ì˜ í–‰ìš´ ì¿ í‚¤</h1>
          <p class="lead">ë²„íŠ¼ì„ í†¡ ëˆŒëŸ¬ ì¿ í‚¤ë¥¼ ê¹¨ë©´, ì˜¤ëŠ˜ì˜ ìš´ì„¸ê°€ ë‚˜ì™€ìš”. ë§ˆìŒì— ë“¤ë©´ ë³µì‚¬í•˜ê±°ë‚˜ ì €ì¥í•´ë³´ì„¸ìš”.</p>
        </div>
      </div>

      <div class="stage" style="margin-top:8px;">
        <div class="cookie-wrap">
          <div id="cookie" class="cookie" title="ì¿ í‚¤ë¥¼ ê¹¨ë³´ì„¸ìš”!">
            <!-- simple cookie chip dots -->
            <svg width="180" height="180" viewBox="0 0 180 180" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <radialGradient id="g1" cx="0.6" cy="0.3">
                  <stop offset="0" stop-color="#fff3" />
                </radialGradient>
              </defs>
              <circle cx="90" cy="90" r="80" fill="url(#cookieGradient)" />
            </svg>
          </div>

          <svg class="crack" id="crack" viewBox="0 0 220 220" width="220" height="220" xmlns="http://www.w3.org/2000/svg">
            <g stroke="#3a2a1f" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none">
              <path id="cr1" d="M110 40 L120 85 L98 110 L126 132 L102 158" stroke-opacity="0.06"></path>
            </g>
          </svg>

          <div id="note" class="note">ì¤€ë¹„ ì¤‘...</div>

        </div>

        <div style="flex:1;">
          <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
            <div>
              <div style="font-size:13px; font-weight:800; color:#111">í•œ ë²ˆì˜ í„°ì¹˜ë¡œ ë³´ëŠ” ì˜¤ëŠ˜ì˜ ìš´ì„¸</div>
              <div class="hint">ì„¸ë ¨ëœ ë¬¸êµ¬ë“¤ì´ ëœë¤ìœ¼ë¡œ ë‚˜ì™€ìš” â€” ì´ <span id="count">0</span>ê°œ</div>
            </div>
            <div style="text-align:right">
              <div style="font-size:12px; color:#222a">ì˜¤ëŠ˜: <strong id="todayDate"></strong></div>
            </div>
          </div>

          <div class="controls">
            <button id="breakBtn" class="btn btn-primary">ì¿ í‚¤ ê¹¨ê¸° âœ¨</button>
            <button id="againBtn" class="btn btn-ghost">ë‹¤ì‹œ</button>
            <button id="copyBtn" class="btn btn-ghost">ë³µì‚¬</button>
          </div>

          <footer>Tip: ì¿ í‚¤ë¥¼ ê¸¸ê²Œ ëˆ„ë¥´ê±°ë‚˜ 'ë‹¤ì‹œ' ëˆŒëŸ¬ ì—¬ëŸ¬ ë¬¸êµ¬ë¥¼ ì €ì¥í•´ë³´ì„¸ìš”.</footer>
        </div>
      </div>
    </div>

    <aside class="side">
      <div class="history">
        <h3>ì €ì¥ëœ ë¬¸êµ¬</h3>
        <div id="history" class="hist-list"><div class="hist-item">ì•„ì§ ì—†ì–´ìš” â€” ì¿ í‚¤ë¥¼ ê¹¨ë³´ì„¸ìš”.</div></div>
      </div>

      <div class="history">
        <h3>ì„¤ì •</h3>
        <div style="display:flex; gap:8px; align-items:center; font-size:13px">
          <label style="display:flex; gap:8px; align-items:center"><input id="autoConfetti" type="checkbox" checked> ìë™ ì¶•í•˜(ì½˜í˜í‹°)</label>
        </div>
      </div>

    </aside>

    <canvas class="confetti" id="confetti"></canvas>
  </div>

  <script>
    // --- Data: í–‰ìš´ ë¬¸êµ¬(ê¹”ë¡±í•˜ê²Œ!) ---
    const fortunes = [
      "ë„ˆëŠ” ë„ˆê°€ ìƒê°í•˜ëŠ” ê²ƒë³´ë‹¤ ì¡´ë‚˜ ê°•í•´.",
      "ì˜¤ëŠ˜ì€ ë­˜ í•´ë„ ë‹¤ ì˜ ë  ê±°ì•¼.",
      "ë”´ ìƒˆë¼ë“¤ ë§ì— íœ˜ë‘˜ë¦¬ì§€ ë§ˆ.",
      "ì˜¤ëŠ˜ì€ ì†¡í•˜ì˜ê°™ì€ ë‚ ì´ ë ê±°ì•¼.",
      "ë„ˆê°€ í‹€ë¦°ê²Œ ì•„ë‹ˆë¼ ë”´ ìƒˆë¼ë“¤ì´ í‹€ë¦°ê±°ì•¼",
      "ì˜¤ëŠ˜ì€ ë°”ë¡œ ë„ˆì˜ ë‚ .",
      "ëŠ¦ì—ˆë‹¤ê³  ìƒê°í•  ë•ŒëŠ” ì§„ì§œ ì¡´ë‚˜ ëŠ¦ì€ê±°ì•¼. ë¹¨ë¦¬ ì‹œì‘í•´.",
      "ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŠ” ë„¤ ì„ íƒì„ ë” ë©‹ì§€ê²Œ ë§Œë“¤ì–´ì¤„ ê±°ì•¼.",
      "í¬ë§ì´ ì•ˆ ë³´ì¸ë‹¤ê³  ìƒê°í•´? ê·¸ëŸ¼ í¬ë§ì„ ë§Œë“¤ì–´.",
      "í¬ë§ì´ ì—†ì–´? ê·¸ëŸ¼...ì¢€ ìŠ¬í”„ë„¤.",
      "ì§€ê¸ˆ ì´ ìˆœê°„ë„ ë„ˆì˜ ë©‹ì§„ í¬íŠ¸í´ë¦¬ì˜¤ í•œ ì¤„ì´ ë¼.",
      "ë„ˆëŠ” ë„ˆ ë§˜ëŒ€ë¡œ í•´. ê·¸ëŸ¼ ëª¨ë‘ê°€ ë„ ì‹«ì–´í• ê±°ì•¼.",
      "ì˜¤ëŠ˜ ë“¤ì„ ë…¸ë˜ê°€ ë„¤ ìƒì•  ìµœê³ ì˜ ë…¸ë˜ê°€ ë ê±°ì•¼..",
      "ëˆ„ê°€ ë„ ì´ìœ  ì—†ì´ ì‹«ì–´í•œë‹¤ê³  ìƒê°í•˜ë©´ ë„ˆê°€ ì˜ëª»ëœê±°ì•¼.",
      "ê¸‰í• ìˆ˜ë¡ ë” ì²œì²œíˆ, ì¹¨ì°©í•˜ê²Œ.",
      "ì˜¤ëŠ˜ ê¸¸ì—ì„œ 5ë§Œì› ì£¼ì›€.",
      "ì˜¤ëŠ˜ ê¸¸ì—ì„œ ë§Œì› ì£¼ì›€.",
      "ì˜¤ëŠ˜ ë„¤ ì´ìƒí˜• ë´„.",
      "ìƒˆë¡œìš´ ì¹œêµ¬ë¥¼ ì‚¬ê·ˆê±°ì•¼.",
      "ì˜¤ëŠ˜ì€ ë„ˆì˜ ìµœê³ ì˜ ë‚ .",
    ];

    // --- ê¸°ë³¸ ì—˜ë¦¬ë¨¼íŠ¸ ---
    const cookie = document.getElementById('cookie');
    const breakBtn = document.getElementById('breakBtn');
    const againBtn = document.getElementById('againBtn');
    const copyBtn = document.getElementById('copyBtn');
    const note = document.getElementById('note');
    const historyEl = document.getElementById('history');
    const countEl = document.getElementById('count');
    const todayDate = document.getElementById('todayDate');
    const confettiCanvas = document.getElementById('confetti');
    const autoConfetti = document.getElementById('autoConfetti');

    // --- ì´ˆê¸°í™” ---
    countEl.textContent = fortunes.length;
    todayDate.textContent = new Date().toLocaleDateString('ko-KR');

    // load history
    let saved = JSON.parse(localStorage.getItem('lucky_cookie_history')||'[]');
    function renderHistory(){
      historyEl.innerHTML = '';
      if(!saved.length) historyEl.innerHTML = '<div class="hist-item">ì•„ì§ ì—†ì–´ìš” â€” ì¿ í‚¤ë¥¼ ê¹¨ë³´ì„¸ìš”.</div>';
      else saved.slice().reverse().forEach(s => {
        const d = document.createElement('div'); d.className='hist-item'; d.textContent = s; historyEl.appendChild(d);
      });
    }
    renderHistory();

    // ëœë¤ ë½‘ê¸°
    function randFortune(){
      return fortunes[Math.floor(Math.random()*fortunes.length)];
    }

    let last = '';
    function showFortune(text){
      note.textContent = text; note.classList.add('show');
      // add to history
      saved.push(text); localStorage.setItem('lucky_cookie_history', JSON.stringify(saved.slice(-50)));
      renderHistory();
      last = text;
      if(autoConfetti.checked) launchConfetti();
    }

    // cookie interaction
    function crackCookie(){
      cookie.classList.add('shake');
      setTimeout(()=>cookie.classList.remove('shake'),900);
      // animate reveal
      const f = randFortune();
      setTimeout(()=>{
        showFortune(f);
      },420);
    }

    breakBtn.addEventListener('click', ()=>{
      crackCookie();
    });

    againBtn.addEventListener('click', ()=>{
      if(!last) { crackCookie(); return; }
      showFortune(randFortune());
    });

    copyBtn.addEventListener('click', async ()=>{
      if(!last){ navigator.clipboard.writeText(note.textContent||''); alert('ë¨¼ì € ì¿ í‚¤ë¥¼ ê¹¨ì„œ ë¬¸êµ¬ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”!'); return; }
      try{ await navigator.clipboard.writeText(last); copyBtn.textContent='ë³µì‚¬ë¨ âœ“'; setTimeout(()=>copyBtn.textContent='ë³µì‚¬',1100); }catch(e){ alert('í´ë¦½ë³´ë“œ ë³µì‚¬ ë¶ˆê°€'); }
    });

    // long-press ê¸°ëŠ¥: ëª¨ë°”ì¼ì—ì„œ ì¿ í‚¤ ê¸¸ê²Œ ëˆ„ë¥´ë©´ ë°”ë¡œ ë³µì‚¬
    let pressTimer = null;
    cookie.addEventListener('pointerdown', (e)=>{ pressTimer = setTimeout(()=>{ if(last){ navigator.clipboard.writeText(last); alert('ë¬¸êµ¬ ë³µì‚¬ë¨!'); } else { crackCookie(); } }, 600); });
    cookie.addEventListener('pointerup', ()=>{ if(pressTimer) clearTimeout(pressTimer); });
    cookie.addEventListener('pointerleave', ()=>{ if(pressTimer) clearTimeout(pressTimer); });

    // ê°€ë²¼ìš´ ì½˜í˜í‹°(ì§ì ‘ êµ¬í˜„)
    function resizeCanvas(){ confettiCanvas.width = window.innerWidth; confettiCanvas.height = window.innerHeight; }
    window.addEventListener('resize', resizeCanvas); resizeCanvas();

    function launchConfetti(){
      const ctx = confettiCanvas.getContext('2d');
      const pieces = [];
      const colors = ['#FF7BAC','#FFD76B','#9BF6FF','#B8FFB0','#C9B6FF'];
      for(let i=0;i<60;i++){
        pieces.push({x: Math.random()*confettiCanvas.width, y: Math.random()*confettiCanvas.height/2, r:Math.random()*6+4, vx:(Math.random()-0.5)*6, vy: Math.random()*3+2, color: colors[Math.floor(Math.random()*colors.length)], rot: Math.random()*360, vr: (Math.random()-0.5)*10});
      }
      let t=0;
      function frame(){
        t++; ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
        pieces.forEach(p=>{
          p.x += p.vx; p.y += p.vy; p.vy += 0.12; p.rot += p.vr;
          ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
          ctx.fillStyle = p.color; ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6);
          ctx.restore();
        });
        if(t<90) requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);
    }

    // ì‘ì€ UX: ì‹œì‘ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€
    note.textContent = 'ì¿ í‚¤ë¥¼ ëˆŒëŸ¬ í–‰ìš´ì„ ë°›ì•„ë³´ì„¸ìš” âœ¨';

  </script>
</body>
</html>
